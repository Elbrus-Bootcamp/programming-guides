# Memoization guide

## –û–ø–∏—Å–∞–Ω–∏–µ

_–ú–µ–º–æ–∏–∑–∞—Ü–∏—è_ - —ç—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –∑–∞—Ç—Ä–∞—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞
–≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π –ø—É—Ç–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –∏ –∏—Ö
–∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ React _–º–µ–º–æ–∏–∑–∞—Ü–∏—è_ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ª–∏—à–Ω–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞.

## –ü—Ä–∏–º–µ—Ä—ã

### React.memo

–ï—Å–ª–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
—Ç–æ–∂–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—é—Ç—Å—è.

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞ (Higher-order component) _React.memo_ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ –≤—ã–∑—ã–≤–∞—Ç—å
—Ä–µ—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –µ—Å–ª–∏ –Ω–∏ –ø—Ä–æ–ø—Å—ã, –Ω–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω—è–ª–∏—Å—å.

_–ü—Ä–∏–º–µ—Ä_: –∏–∑–º–µ–Ω–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ `posts` –Ω–µ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–µ –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ –∑–∞–Ω–æ–≤–æ

```tsx
// –§–∞–π–ª —Å–ø–∏—Å–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫
type ListCardsProps = { posts: PostType[] };

export default function ListCards({ posts }: ListCardsProps): JSX.Element {
  return (
    <div>
      {posts.map((post) => (
        <OneCard post={post} />
      ))}
    </div>
  );
}
```

```tsx
// –§–∞–π–ª –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
type OneCardProps = { post: PostType };

function OneCard({ post }: OneCardProps): JSX.Element {
  return (
    <div>
      <h2>{post.title}</h2>
      <p>{post.body}</p>
    </div>
  );
}

export default React.memo(OneCard);
```

### useCallback

–•—É–∫ useCallback –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é –º–µ–∂–¥—É
—Ä–µ–Ω–¥–µ—Ä–∞–º–∏, –µ—Å–ª–∏ –µ—ë –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –≤ —Å–∏—Ç—É–∞—Ü–∏—è—Ö, –∫–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è,
—Å–æ–∑–¥–∞–≤–∞–µ–º–∞—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ, –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–∞ –¥—Ä—É–≥–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–ø—Å–∞. –ë–µ–∑
useCallback —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ
–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–Ω—É–∂–Ω—ã–º –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞–º –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

_–ü—Ä–∏–º–µ—Ä_: –∫–æ–ª–±—ç–∫ `myHandler` –Ω–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ `ListCards`

```tsx
// –§–∞–π–ª —Å–ø–∏—Å–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫
type ListCardsProps = { posts: PostType[] };

export default function ListCards({ posts }: ListCardsProps): JSX.Element {
  const myHandler = useCallback((): void => {
    /* –∫–∞–∫–æ–π-—Ç–æ –∫–æ–¥ */
  }, []);
  return (
    <div>
      {posts.map((post) => (
        <OneCard post={post} myHandler={myHandler} />
      ))}
    </div>
  );
}
```

```tsx
// –§–∞–π–ª –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
type OneCardProps = { post: PostType; myHandler: () => void };

function OneCard({ post, myHandler }: OneCardProps): JSX.Element {
  return (
    <div>
      <button onClick={myHandler}>{post.title}</button>
      <p>{post.body}</p>
    </div>
  );
}

export default React.memo(OneCard);
```

<aside>
üí° –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∏–∑–ª–∏—à–Ω–∏—Ö —Ä–µ–Ω–¥–µ—Ä–æ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useCallback` –∏ `React.memo` –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

</aside>

### useMemo

–•—É–∫ useMemo –≤ React –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ –ª—é–±—ã—Ö —Å—Å—ã–ª–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –≤
–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö. –≠—Ç–æ—Ç —Ö—É–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞
—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –¢–∞–∫–∂–µ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ useMemo —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è
–∑–∞–Ω–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –±–ª–∞–≥–æ–¥–∞—Ä—è —á–µ–º –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
–ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

–ü—Ä–∏–º–µ—Ä: –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `startDate` –Ω–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞—Ö

```tsx
// –§–∞–π–ª —Å–ø–∏—Å–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫
type ListCardsProps = { posts: PostType[] };

export default function ListCards({ posts }: ListCardsProps): JSX.Element {
  const startDate = useMemo(() => new Date(), []);
  return (
    <div>
      {posts.map((post) => (
        <OneCard post={post} myHandler={myHandler} startDate={startDate} />
      ))}
    </div>
  );
}
```

```tsx
// –§–∞–π–ª –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
type OneCardProps = { post: PostType; myHandler: () => void; startDate: Date };

function OneCard({ post, myHandler, startDate }: OneCardProps): JSX.Element {
  return (
    <div>
      <button onClick={myHandler}>{post.title}</button>
      <p>{post.body}</p>
      <p>–î–∞–Ω–Ω—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã –Ω–∞ {startDate.toLocaleString()}</p>
    </div>
  );
}

export default React.memo(OneCard);
```

<aside>
üí° –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∏–∑–ª–∏—à–Ω–∏—Ö —Ä–µ–Ω–¥–µ—Ä–æ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useMemo` –∏ `React.memo` –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

</aside>
